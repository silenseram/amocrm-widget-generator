# AmoCRM widget generator

Генератор виджета для AmoCRM, репозиторий содержит готовый шаблон для написания виджета + автосборку для деплоя

### Установка
Для установки скачайте содержиое репозитория командой git clone:

```sh
$ git clone https://github.com/silenseram/amocrm-widget-generator.git
```

Установите зависимости:
```sh
$ npm install
```
### Автосборка для деплоя

Как это работает: для обхода кеширования AmoCRM на время разработки, мы собираем в архив manifest.json, ланг-файл и картинки, туда же автоматически генерируется script.js, который будет подгружать настоящий файл скрипта с нашего сервера, архив загружаем в амо.
**Важно!** Данное решение актуально лишь на этапе разработки виджета!
Для сборки архива, находясь в папке с проектом, выполните команду

```sh
$ npm run build
```

### Конфигурация
Конфигурация находится в файле `build/config.json`
`widget_code`: Код виджета. Набор символов для идентификации виджета нашей системой
`base_url`: URL, к которому будет добавлен /widget_code/. В итоге должна получиться ссылка на папку с исходным кодом виджета
`installer_path`: Путь до папки, куда будет класться собранный архив
`widget_path`: Путь до папки с исходным кодом виджета
##### Пример
В данном примере js-код виджета должен быть доступен по пути https://oursite.ru/widgets/whatsapp_integration/script.js, исходный код должен располагаться в ./src, а архив для деплоя будет собран в ./artifacts
```json 
{
  "base_url": "https://oursite.ru/widgets/",
  "widget_code": "whatsapp_integration",
  "installer_path": "./artifacts",
  "widget_path": "./src"
}
```
